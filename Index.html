<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Recipe AI - Camera & Voice Cooking Assistant</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <i class="fas fa-utensils"></i>
                <h1>Chef<span>Mate</span></h1>
            </div>
            <div class="status-indicators">
                <div class="status-item" id="mic-status">
                    <i class="fas fa-microphone"></i>
                    <span>Mic Ready</span>
                </div>
                <div class="status-item" id="camera-status">
                    <i class="fas fa-camera"></i>
                    <span>Camera On</span>
                </div>
                <div class="status-item" id="ai-status">
                    <i class="fas fa-brain"></i>
                    <span>AI Connected</span>
                </div>
            </div>
        </header>

        <main class="main-content">
            <!-- Left Panel: Camera Feed -->
            <div class="left-panel">
                <div class="camera-container">
                    <div class="camera-header">
                        <h2><i class="fas fa-video"></i> Kitchen View</h2>
                        <div class="camera-controls">
                            <button id="toggle-camera" class="btn-icon" title="Toggle Camera">
                                <i class="fas fa-camera"></i>
                            </button>
                            <button id="capture-frame" class="btn-icon" title="Show to AI">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>
                    <div class="camera-feed">
                        <video id="camera-feed" autoplay playsinline muted></video>
                        <div class="camera-overlay">
                            <div class="overlay-text" id="camera-hint">
                                Camera is active. Say "dekho" to show food.
                            </div>
                            <canvas id="frame-canvas" style="display: none;"></canvas>
                        </div>
                    </div>
                    <div class="camera-hints">
                        <p><i class="fas fa-lightbulb"></i> <strong>Tips:</strong> Keep camera steady. Good lighting helps AI see better.</p>
                    </div>
                </div>

                <!-- Current Step Display -->
                <div class="step-container">
                    <div class="step-header">
                        <h2><i class="fas fa-list-ol"></i> Current Step</h2>
                        <div class="step-counter" id="step-counter">
                            Step <span id="current-step">0</span>/<span id="total-steps">0</span>
                        </div>
                    </div>
                    <div class="step-content" id="current-step-text">
                        Click "Start Cooking" to begin your culinary journey!
                    </div>
                    <div class="step-actions">
                        <button id="prev-step" class="btn-secondary" disabled>
                            <i class="fas fa-arrow-left"></i> Previous
                        </button>
                        <button id="next-step" class="btn-secondary" disabled>
                            Next <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Right Panel: Chat Interface -->
            <div class="right-panel">
                <div class="chat-container">
                    <div class="chat-header">
                        <h2><i class="fas fa-comments"></i> Cooking Assistant</h2>
                        <div class="chat-controls">
                            <button id="toggle-mic" class="btn-icon mic-active" title="Toggle Microphone">
                                <i class="fas fa-microphone"></i>
                            </button>
                            <button id="toggle-ai-speech" class="btn-icon speech-active" title="Toggle AI Speech">
                                <i class="fas fa-volume-up"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="chat-messages" id="chat-messages">
                        <!-- Messages will be inserted here -->
                        <div class="message ai-message">
                            <div class="message-avatar">
                                <i class="fas fa-robot"></i>
                            </div>
                            <div class="message-content">
                                <div class="message-text">
                                    Namaste! I'm ChefMate, your kitchen assistant. Ready to cook together? Let's start by clicking "Start Cooking" below.
                                </div>
                                <div class="message-time">Just now</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="chat-input-area">
                        <div class="input-controls">
                            <button id="voice-input" class="btn-voice">
                                <i class="fas fa-microphone"></i>
                                <span>Hold to Talk</span>
                            </button>
                            <div class="input-wrapper">
                                <input type="text" id="text-input" placeholder="Type your message or ingredient question...">
                                <button id="send-text" class="btn-send">
                                    <i class="fas fa-paper-plane"></i>
                                </button>
                            </div>
                        </div>
                        <div class="input-hints">
                            <p><i class="fas fa-comment-alt"></i> <strong>Try saying:</strong> "Let's make pasta" or "dekho meri sabzi"</p>
                        </div>
                    </div>
                </div>

                <!-- Main Controls -->
                <div class="controls-container">
                    <div class="controls-header">
                        <h2><i class="fas fa-cogs"></i> Controls</h2>
                    </div>
                    <div class="controls-buttons">
                        <button id="start-cooking" class="btn-primary btn-large">
                            <i class="fas fa-play"></i> Start Cooking
                        </button>
                        <button id="pause-cooking" class="btn-warning btn-large" disabled>
                            <i class="fas fa-pause"></i> Pause
                        </button>
                        <button id="reset-cooking" class="btn-secondary btn-large">
                            <i class="fas fa-redo"></i> Reset
                        </button>
                    </div>
                    <div class="progress-container">
                        <div class="progress-label">
                            <span>Cooking Progress</span>
                            <span id="progress-percent">0%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progress-fill"></div>
                        </div>
                    </div>
                </div>

                <!-- Ingredients Panel -->
                <div class="ingredients-container">
                    <div class="ingredients-header">
                        <h2><i class="fas fa-carrot"></i> Ingredients</h2>
                        <button id="toggle-ingredients" class="btn-icon">
                            <i class="fas fa-chevron-down"></i>
                        </button>
                    </div>
                    <div class="ingredients-list" id="ingredients-list">
                        <div class="empty-ingredients">
                            <i class="fas fa-clipboard-list"></i>
                            <p>Ingredients will appear here once you start cooking</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-info">
                <p><i class="fas fa-info-circle"></i> <strong>Tip:</strong> Speak clearly and naturally. ChefMate understands Hinglish and cooking terms.</p>
            </div>
            <div class="footer-status">
                <div class="connection-status" id="connection-status">
                    <span class="status-dot connected"></span>
                    <span>All Systems Ready</span>
                </div>
            </div>
        </footer>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <div class="loading-text" id="loading-text">Initializing ChefMate...</div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="config.js"></script>
    <script src="state.js"></script>
    <script src="speech.js"></script>
    <script src="camera.js"></script>
    <script src="ai.js"></script>
    <script src="app.js"></script>
    
    <!-- Only load config if exists -->
    <script>
        if (typeof CONFIG === 'undefined') {
            console.warn('config.js not found. Using example config. Please create config.js with your API key.');
            // Create minimal config for demo
            const CONFIG = {
                GEMINI_API_KEY: '',
                GEMINI_MODEL: 'gemini-1.5-pro',
                MAX_RETRIES: 1,
                REQUEST_TIMEOUT: 10000,
                VISION_ENABLED: false
            };
        }
    </script>
</body>
</html>
